<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <title>HiYew Create Account</title> 
    </h:head> 
    <h:body>
        <h:form id="mainForm">
            
            <p:panel id="panel" header="Add New Customer">
                <p:messages id="msgs" showDetail="false" />
                
                <p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
                    <p:graphicImage value="/images/progress_bar.gif" />
                </p:dialog>

                

                <p:panelGrid>
                   
                    <p:row>
                        <p:column>
                            <p:outputLabel for="customerName" value="Name:" />
                            
                        </p:column>
                        <p:column>
                            <p:inputText value="#{customerManagedBean.newCustomer.name}" required="true" requiredMessage="Name is required." id="customerName"  />
                        </p:column>
                        
                    </p:row>
                    <p:row>
                        <p:column>
                            <p:outputLabel for="Phone" value="Contact No:" />
                        </p:column>
                        <p:column>
                            <p:inputText value="#{customerManagedBean.newCustomer.phone}" required="true" maxlength="8" requiredMessage="Phone is required." id="Phone" 
                                         validatorMessage="[Phone] Please enter only 8 digits starting with 6,8 and 9.">
                                <f:validateRegex pattern="(^[6,8,9]{1}[0-9]{7}$)"/>
                            </p:inputText>
                        </p:column>
                    </p:row>
                    <!--validate email address -->
                    <p:row>
                        <p:column>
                            <p:outputLabel for="Email" value="Email:" />
                            
                        </p:column>
                        <p:column>
                            <p:inputText placeholder="e.g. someone@gmail.com" value="#{customerManagedBean.newCustomer.email}" required="true" requiredMessage="Email is required." id="Email"
                                         validatorMessage="[Email] Invalid email format. Example: Someone@gmail.com">
                                <f:validateRegex pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
                            </p:inputText>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column>
                            <p:outputLabel for="Address1" value="Address:" />
                            
                            <br />
                            <br />
                            <p:outputLabel for="Address2" value="" />
                            
                        </p:column> 
                        <p:column>
                            <p:inputText style="margin-top: 5px" placeholder="e.g. Beach Road" value="#{customerManagedBean.newCustomer.address1}" required="true" requiredMessage="Street name is required." id="Address1"  />
                            <br />
                            
                            <p:inputText placeholder="e.g. 12, #01-02" value="#{customerManagedBean.newCustomer.address2}" id="Address2"  />
                            
                            </p:column>
                    </p:row>
                    
                    <p:row>
                        <p:column>
                            <p:outputLabel for="Postal" value="Postal Code:" />
                        </p:column>
                        <p:column>
                            <p:inputText value="#{customerManagedBean.newCustomer.postalCode}" required="true" maxlength="6" requiredMessage="Postal Code is required." id="Postal"
                                         validatorMessage="[Postal Code] Please enter only 6 digits.">
                                <f:validateRegex pattern="(^[0-9]{6}$)"/>
                                
                            </p:inputText>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column>
                            <p:outputLabel for="Username" value="User name:" />
                            
                        </p:column> 
                        <p:column>
                            <p:inputText value="#{customerManagedBean.newCustomer.userName}" required="true" requiredMessage="User name is required." id="Username"  />
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column>
                            <p:outputLabel for="Password" value="Password:" />
                        </p:column> 
                        <p:column>
                            <p:password value="#{customerManagedBean.newCustomer.pw}" required="true" feedback="true" inline="true" requiredMessage="Password is required." id="Password"
                                        validatorMessage="[Password] Password should be at least 8 characters(only digit and alphabets).">
                                <f:validateRegex pattern="(^[0-9a-zA-Z]{8,}$)"/>
                            </p:password>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column>
                            <p:outputLabel for="Re-Password" value="Re-type Password:" />
                        </p:column> 
                        <p:column>
                            <p:password value="#{customerManagedBean.rePassword}" required="true" inline="true" requiredMessage="Retype Password." id="Re-Password"  
                                        validatorMessage="[Re-type Password] Re-typed password is not the same.">
                                <f:validateRegex pattern="(^[0-9a-zA-Z]{8,}$)"/>
                                </p:password>
                        </p:column>
                    </p:row>
                    

                     <!--radio button for preferred communication (postal mail, phone, email) -->
                </p:panelGrid>
                <br />
                <p:commandButton action="#{customerManagedBean.createCustomer()}" value="Submit" update="msgs" />
            </p:panel>

        </h:form>
    </h:body>
</html>

