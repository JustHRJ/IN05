<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <title>HiYew Create Account</title> 
    </h:head> 
    <h:body>
        <h:form id="mainForm">
            <p:panel id="panel" header="Add New Customer">
                <p:ajaxStatus style="display:block;margin-bottom:2em;height:24px;">


                </p:ajaxStatus>

                <p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />

                <p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
                    <p:graphicImage value="/images/progress_bar.gif" />
                </p:dialog>

                <p:growl id="msgs" showDetail="true" />

                <p:panelGrid>
                   
                    <p:row>
                        <p:column>
                            <p:outputLabel for="customerName" value="Name:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" />
                            <p:inputText value="#{customerManagedBean.newCustomer.name}" required="true" requiredMessage="Name is required." id="customerName"  />
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column>
                            <p:outputLabel for="Phone" value="Contact No:&nbsp;&nbsp;" />
                            <p:inputText value="#{customerManagedBean.newCustomer.phone}" required="true" requiredMessage="Phone is required." id="Phone"  />
                        </p:column>
                    </p:row>
                    <!--validate email address -->
                    <p:row>
                        <p:column>
                            <p:outputLabel for="Email" value="Email:&nbsp;&nbsp;" />
                            <p:inputText value="#{customerManagedBean.newCustomer.email}" required="true" requiredMessage="Email is required." id="Email"
                                         validatorMessage="Invalid email format. Example: Someone@gmail.com">
                                <f:validateRegex pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
                            </p:inputText>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column>
                            <p:outputLabel for="Address1" value="Address1:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" />
                            <p:inputText value="#{customerManagedBean.newCustomer.address1}" required="true" requiredMessage="Address1 is required." id="Address1"  />
                        </p:column> 
                    </p:row>
                    <p:row>
                        <p:column>
                            <p:outputLabel for="Address2" value="Address2: &nbsp;&nbsp;&nbsp;" />
                            <p:inputText value="#{customerManagedBean.newCustomer.address2}" required="true" requiredMessage="Address2 is required." id="Address2"  />
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column>
                            <p:outputLabel for="Postal" value="Postal Code: &nbsp;&nbsp;&nbsp;" />
                            <p:inputText value="#{customerManagedBean.newCustomer.postalCode}" required="true" requiredMessage="Postal Code is required." id="Postal"  />
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column>
                            <p:outputLabel for="Username" value="User name:&nbsp;&nbsp;" />
                            <p:inputText value="#{customerManagedBean.newCustomer.userName}" required="true" requiredMessage="User name is required." id="Username"  />

                        </p:column> 
                    </p:row>
                    <p:row>
                        <p:column>
                            <p:outputLabel for="Password" value="Password: &nbsp;&nbsp;&nbsp;" />
                            <p:password value="#{customerManagedBean.newCustomer.pw}" required="true" feedback="true" inline="true" requiredMessage="Password is required." id="Password"  />
                        </p:column> 
                    </p:row>
                    <p:row>
                        <p:column>
                            <p:outputLabel for="Re-Password" value="Re-type Password: &nbsp;&nbsp;&nbsp;" />
                            <p:password value="#{customerManagedBean.rePassword}" required="true" inline="true" requiredMessage="Retype Password." id="Re-Password"  />
                        </p:column> 
                    </p:row>
                    

                     <!--radio button for preferred communication (postal mail, phone, email) -->
                </p:panelGrid>
                <br />
                <p:commandButton action="#{customerManagedBean.createCustomer()}" value="Submit" update="msgs" />
            </p:panel>

        </h:form>
    </h:body>
</html>

