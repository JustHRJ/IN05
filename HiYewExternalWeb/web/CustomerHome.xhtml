<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Home</title>
    </h:head>
    <h:body>
        <h:form id="mainForm">
            <p:growl id="msgs" showDetail="true" />


            <p:messages id="msg"  showDetail="true" />
            <h:panelGrid>
                <p:row>
                    <p:column>
                        <h:outputText value="Signed in as #{user}" style="font-weight: bolder;font-size: 18px"/>

                    </p:column> 
                    <p:column width="50px" style="margin-left: 50px">
                        <h:outputText value="" style="margin-left: 523px"/>
                        <p:commandButton value="Log Out" styleClass="ui-priority-primary" action="#{csLoginManagedBean.logout()}" />
                    </p:column> 
                </p:row>
            </h:panelGrid>


            <p></p>
            <f:ajax render=":content">
                <p:tabView dynamic="true" cache="false" >
                    <p:tab title="Profile">
                        <h:panelGrid columns="2" columnClasses="column" cellpadding="5" id="gridProfile" style="margin-left: 10px">

                            <h:outputLabel value="Click values for Editing" style="font-weight: bolder"/><br />
                            <h:outputLabel for="Name" value="Name:" />
                            <p:inplace id="Name" editor="true">
                                <p:ajax  event="save" listener="#{customerManagedBean.handleSave}" update=":mainForm:msgs"/>
                                <p:inputText value="#{customerManagedBean.customer.name}"  required="true" requiredMessage="Name is required." label="text" />
                            </p:inplace>

                            <h:outputLabel for="Address1" value="Address:" />
                            <p:inplace id="Address1" editor="true">
                                <p:ajax  event="save" listener="#{customerManagedBean.handleSave}" update=":mainForm:msgs"/>
                                <p:inputText value="#{customerManagedBean.customer.address1}" required="true" requiredMessage="Unit number is required." label="text" />
                            </p:inplace>

                            <h:outputLabel for="Address2" value="" />
                            <p:inplace id="Address2" editor="true">
                                <p:ajax  event="save" listener="#{customerManagedBean.handleSave}" update=":mainForm:msgs"/>
                                <p:inputText value="#{customerManagedBean.customer.address2}" required="true" requiredMessage="Sreet name is required." label="text" />
                            </p:inplace>

                            <h:outputLabel for="PostalCode" value="Postal Code:" />
                            <p:inplace id="PostalCode" editor="true">
                                <p:ajax  event="save" listener="#{customerManagedBean.handleSave}" update=":mainForm:msgs"/>
                                <p:inputText value="#{customerManagedBean.customer.postalCode}" required="true" maxlength="6" requiredMessage="Postal Code is required." label="text"
                                             validatorMessage="Please enter only 6 digits.">

                                    <f:validateRegex pattern="(^[0-9]{6}$)"/>
                                </p:inputText>
                            </p:inplace>

                            <h:outputLabel for="Phone" value="Phone:" />
                            <p:inplace id="Phone" editor="true">
                                <p:ajax event="save" listener="#{customerManagedBean.handleSave}" update=":mainForm:msgs"/>
                                <p:inputText value="#{customerManagedBean.customer.phone}" maxlength="8" requiredMessage="Phone is required." required="true" label="text"
                                             validatorMessage="Please enter only 8 digits.">

                                    <f:validateRegex pattern="(^[0-9]{8}$)"/>
                                </p:inputText>
                            </p:inplace>

                            <h:outputLabel for="Email" value="Email:" />
                            <p:inplace id="Email" editor="true">
                                <p:ajax event="save" listener="#{customerManagedBean.handleSave}" update=":mainForm:msgs"/>

                                <p:inputText value="#{customerManagedBean.customer.email}" required="true" label="text" requiredMessage="Email is required."
                                             validatorMessage="Invalid email format. Example: Someone@gmail.com">
                                    <f:validateRegex pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
                                </p:inputText>
                            </p:inplace>

                        </h:panelGrid>

                        <p:accordionPanel style="width: 40%;margin-left: -10px" id="passwordPanel" activeIndex="null">
                            <p:tab title="Change Password">
                                <h:panelGrid>
                                    <p:row>
                                        <p:column>
                                            <h:outputLabel for="curPassword" value="Current Password:&nbsp;" />
                                            <p:password value="#{customerManagedBean.changePasswordInput}" inline="true" requiredMessage="Password is required." id="curPassword"  />

                                        </p:column> 
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <h:outputLabel for="newPassword" value="New Password:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" />
                                            <p:password value="#{customerManagedBean.newPassword}" feedback="true" inline="true" requiredMessage="Password is required." id="newPassword"  />

                                        </p:column> 
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <h:outputLabel for="Re-Password" value="Re-type Password:&nbsp;" />
                                            <p:password value="#{customerManagedBean.rePassword}"  inline="true" requiredMessage="Password is required." id="Re-Password"  />

                                        </p:column> 
                                    </p:row>
                                </h:panelGrid>
                                <br />

                                <p:commandButton value="Submit" action="#{customerManagedBean.changePassword()}" update=":mainForm:msgs " icon="ui-icon-check"/>

                            </p:tab>
                        </p:accordionPanel>

                    </p:tab>

                    <p:tab title="RFQ">
                        <p:panel id="content">

                            <h:outputLabel value="DATE:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#{quotationManagedBean.date}" style="font-weight: bolder">
                                <f:convertDateTime pattern="dd-MM-yyyy" />
                            </h:outputLabel><br />
                            <h:outputLabel value="TERMS OF PAYMENT:&nbsp;#{quotationManagedBean.newQuotation.termsOfPayment} days" style="font-weight: bolder"/><br />
                            <h:outputLabel value="ATTN:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#{customerManagedBean.customer.name}" style="font-weight: bolder"/><br />


                            <br />

                            <p:panelGrid id="weldPanel" columns="7">
                                <f:facet name="header">Metal Welding Job</f:facet>

                                <h:outputLabel for="Description" value="Item Desc: " />
                                <p:inputTextarea id="Description" autoResize="false" placeholder="Include metal code/name and welding instructions" value="#{quotationManagedBean.newQuotationDesc.itemDesc}" rows="6" cols="68" />
                                <h:outputLabel for="Quantity" value="Qty: " />
                                <p:inputText id="Quantity" value="#{quotationManagedBean.newQuotationDesc.qty}" maxlength="5" converterMessage="Please enter digits only.">
                                    <f:validateLongRange minimum="1" />
                                </p:inputText>

                                <p:commandButton value="Add" actionListener="#{quotationManagedBean.addToCacheList}" update=":mainForm:msg mydata" icon="ui-icon-check"  style="margin:0;height:60px">
                                    <p:ajax update="weldPanel" resetValues="true"/>
                                </p:commandButton>
                            </p:panelGrid>


                            <p:dataTable value="#{quotationManagedBean.cacheList}" var="item" id="mydata" editable="true">

                                <p:column headerText="ID" width="10%">
                                    <h:outputText value="#{item.quotationDescNo}"/>
                                </p:column>
                                <p:column headerText="Description">
                                    <p:cellEditor>
                                        <f:facet name="output"><h:outputText value="#{item.itemDesc}"/></f:facet>
                                        <f:facet name="input">
                                            <p:inputTextarea id="Description" autoResize="false" placeholder="Include metal code/name and welding instructions" value="#{item.itemDesc}" rows="6" cols="68" />
                                        </f:facet>
                                    </p:cellEditor>

                                </p:column>
                                <p:column headerText="Qty" width="10%">
                                    <p:cellEditor>
                                        <f:facet name="output"><h:outputText value="#{item.qty}"/></f:facet>
                                        <f:facet name="input"><p:inputText value="#{item.qty}"/></f:facet>
                                    </p:cellEditor>
                                </p:column>
                                <p:column  style="width: 200px" headerText="Edit" width="6%">
                                    <p:rowEditor  />
                                </p:column>
                                <p:column headerText="Delete" width="6%">
                                    <p:commandLink update="mydata" id="deleteLink" styleClass="ui-icon ui-icon-trash" action="#{quotationManagedBean.deleteQuotationDescription(item)}"/>
                                </p:column>
                            </p:dataTable>
                            <br />
                            <p:commandButton value="Submit my request" actionListener="#{quotationManagedBean.createQuotation}" update=":mainForm:msg mydata" icon="ui-icon-check">
                                <p:ajax update="weldPanel" resetValues="true"/>
                            </p:commandButton>
                            <br />
                            <br />


                        </p:panel>
                    </p:tab>
                    <p:tab title="Quotations">

                        <p:panel>Current(use data table with buttons and pop up for PO) and expired...</p:panel>
                        <h:outputLabel value="We are glad to quote you the following:" /><br />
                        <p:dataTable value="#{quotationManagedBean.cacheList}" var="item" id="mydata" editable="true">

                            <p:column headerText="ID" width="10%">
                                <h:outputText value="#{item.quotationDescNo}"/>
                            </p:column>
                        </p:dataTable>

                    </p:tab>

                    <p:tab title="PO">
                        <p:panel>...</p:panel>
                    </p:tab>

                    <p:tab title="Welding Job">
                        <p:panel>...</p:panel>
                    </p:tab>

                    <p:tab title="Invoices">
                        <p:panel>...</p:panel>
                    </p:tab>

                    <p:tab title="Settings">
                        <p:panel>Notifications or alerts (email, sms)...</p:panel>
                    </p:tab>
                </p:tabView>
            </f:ajax>
        </h:form>
    </h:body>
</html>

